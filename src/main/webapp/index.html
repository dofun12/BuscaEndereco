<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
	    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	    <meta name="viewport" content="width=device-width, initial-scale=1">
	    <link href="lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	    
		<script 
			src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js">
		</script>
		
		<script 
			src="//code.jquery.com/jquery-1.11.3.min.js">
		</script>
		
		<script src="lib/bootsrap/js/bootstrap.min.js"></script>
		
		<script>
			var app = angular.module('myApp', []);
			app.controller('EnderecoController', function($scope, $http) {
				$scope.procurarCEP = function(){
					var busca = {"cep" : $scope.inputcep};
					$http.post('/buscaRapidaCEP/', busca , {} ).success(function(data) {
						$scope.teste = data;
						if(data.response == "CEP_DESCONHECIDO"){
							$http.post('/buscaCEP/', busca , {} ).success(function(subData) {
								$scope.teste2 = subData;
							});
						}
						console.log(data);
					});	
				}
				
			});	
		</script>
	</head>
	<body>
		<div ng-app="myApp" ng-controller="EnderecoController">
			<input type="text" ng-model="inputcep"></input><button ng-click="procurarCEP();">Buscar CEP</button>
			<br />
			{{teste}}
			{{teste2}}
		</div>
		
	</body>
</html>
